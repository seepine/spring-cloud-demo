spring:
  application:
    name: gateway-server
  cloud:
    #配置nacos
    nacos:
      discovery:
        server-addr: 127.0.0.1:8848
      config:
        server-addr: ${spring.cloud.nacos.discovery.server-addr}
        file-extension: yml
    #配置gateway
    gateway:
      #对应README步骤一
      discovery:
        locator:
          enabled: true   #开启通过注册中心服务名访问其他服务
          lower-case-service-id: true   #转化为小写,当使用euraka时，服务注册名都为大写
      #对应README步骤三
      routes:
        - id: nacos-provider  #可随意指定但是要保证唯一
          uri: lb://nacos-provider  #lib://指定服务名,也可直接指定地址(http://127.0.0.1:12000)
          predicates:
            - Path=/provider/**   #当网关匹配到改路径，将会转发到uri地址
          filters: #可指定非全局过滤器，单独为此服务过滤
            - StripPrefix=1   #网关自带的过滤器，去掉N个前缀，具体实现参考StripPrefixGatewayFilterFactory
            - name: Hystrix
              args:
                name: fallbackcmd
                fallbackUri: forward:/fallback    #指定熔断跳转地址
server:
  port: 13000